(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){e.exports=a(336)},214:function(e,t){},216:function(e,t){},250:function(e,t){},251:function(e,t){},336:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(81),i=a.n(l),s=(a(87),a(35)),c=a(36),o=a(40),u=a(37),m=a(39),h=a(32),d=a(10),p=a.n(d),f=a(28),g=a(9),E=a(339),b=a(82),S=a.n(b),v=a(337),x=a(338),D=a(340),C=a(50),w=a.n(C),y=function(e){var t=e.pageDetails,a=t.recordCount,n=t.pageSize,l=t.pageNo;if(!a||a<=0)return null;var i=Math.floor(a/n);(a<n||a>n&&a%n>1)&&(i+=1);for(var s=[1];s.length<i;)s.push(s.length+1);return r.a.createElement("p",null,n," records per list.",r.a.createElement("br",null)," Page ",l," Of ",i,"  GoTo Page ",r.a.createElement("select",{name:"pageNo",onChange:function(t){return e.onPageChange(t)}}," ",s.map(function(e){return r.a.createElement("option",{key:e,value:e}," ",e," ")})," ")," ")},O=function(e){return r.a.createElement(v.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"darkblue"},r.a.createElement("th",null,"Select Search List"))),r.a.createElement("tbody",null,e.data.map(function(t,a){return r.a.createElement("tr",{key:a,className:"lightblue"},r.a.createElement("td",{onClick:function(){return e.onChangeHandler(a)}},r.a.createElement(x.a,{style:{cursor:"pointer"}}," \xa0",t.Name,"\xa0")))})))},z=function(e){return e.data?r.a.createElement(v.a,{responsive:!0,striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"darkblue"},r.a.createElement("th",null,r.a.createElement(D.a,null,"#")),r.a.createElement("th",null,r.a.createElement(D.a,{onClick:function(){return e.onSortHandler("Path")}},"File Path")),r.a.createElement("th",null,r.a.createElement(D.a,{onClick:function(){return e.onSortHandler("Size")}},"Size")),r.a.createElement("th",null,r.a.createElement(D.a,{onClick:function(){return e.onSortHandler("Ext")}},"File Extension")),r.a.createElement("th",null,r.a.createElement(D.a,{onClick:function(){return e.onSortHandler("MaxDate")}},"Last Used Date")))),r.a.createElement("tbody",null,e.data.map(function(e,t){return r.a.createElement("tr",{className:"oddeven",key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",{className:"wordwrap"},e.Path),r.a.createElement("td",null,e.Size),r.a.createElement("td",{className:"wordwrap"},e.Ext),r.a.createElement("td",null,e.MaxDate?w()(e.MaxDate).format("YYYY-MMM-DD"):null))}))):null},F=a(84),j=a(41),N=a.n(j),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={searchFilter:{minFileSize:"",maxFileSize:"",minDate:"",maxDate:"",filePath:""},errors:{}},a.schema={minFileSize:N.a.number().integer().allow(null).allow("").optional().label("Min. file size "),maxFileSize:N.a.number().integer().allow(null).allow("").optional().label("Max. file size "),filePath:N.a.string().allow("").optional()},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value,l=Object(F.a)({},a.state.searchFilter);l[n]=r,a.setState({searchFilter:l})},a.handleSubmit=function(){if(0===a.props.data.Count)return h.toast.info("0 results to scan in this search",{autoClose:2e3}),!1;if(a.validate()){var e=Object(F.a)({},a.state.searchFilter);a.props.onSubmitHandler(e)}return!1},a.validate=function(){var e=a.state.searchFilter,t=e.minFileSize,n=e.maxFileSize,r=e.filePath,l=e.minDate,i=e.maxDate,s=N.a.validate({minFileSize:t,maxFileSize:n,filePath:r},a.schema,{abortEarly:!1}),c="";return s.error&&(c=s.error.details.map(function(e){return e.message}).join(".")),l&&(c+=w()(l,"YYYY-MM-DD",!0).isValid()?"":"<br>Invalid Min Last Used date"),i&&(c+=w()(i,"YYYY-MM-DD",!0).isValid()?"":"Invalid Max Last Used date"),!c||(h.toast.error(c),!1)},a.handleChange=a.handleChange.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this,t=[];return t.push(["Selected Search Name:",this.props.data.Name,"Description",this.props.data.Description]),t.push(["Requester:",this.props.data.Requester,"Requested At",this.props.data.RequestedAt]),t.push(["Finished At:",this.props.data.FinishedAt,"Count",this.props.data.Count]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("form",{onSubmit:function(){return e.handleSubmit}},r.a.createElement(v.a,{responsive:!0,striped:!0},r.a.createElement(M,{data:t}),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"success"},r.a.createElement("th",null,"File Size (Min.)"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"minFileSize",id:"minFileSize",value:this.state.searchFilter.minFileSize,onChange:this.handleChange})),r.a.createElement("th",null,"File Size (Max.)"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"maxFileSize",id:"maxFileSize",value:this.state.searchFilter.maxFileSize,onChange:this.handleChange}))),r.a.createElement("tr",{className:"info"},r.a.createElement("th",null,"File Path"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"filePath",value:this.state.searchFilter.filePath,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("th",null),r.a.createElement("th",null)),r.a.createElement("tr",{className:"info"},r.a.createElement("th",null,"Last Used Date (Min.)"),r.a.createElement("th",null,r.a.createElement("input",{type:"text",id:"minDate",name:"minDate",value:this.state.searchFilter.minDate,onChange:this.handleChange}),r.a.createElement("br",null),"(YYYY-MM-DD)"),r.a.createElement("th",null,"Last Used Date (Max)"),r.a.createElement("th",null,r.a.createElement("input",{type:"text",id:"maxDate",name:"maxDate",value:this.state.searchFilter.maxDate,onChange:this.handleChange}),r.a.createElement("br",null),"(YYYY-MM-DD)")),r.a.createElement("tr",{className:"info"},r.a.createElement("td",{align:"center",colSpan:4},r.a.createElement(D.a,{bsStyle:"primary",onClick:function(t){return e.handleSubmit(t)},disabled:this.props.isLoading},this.props.isLoading?"Loading.....":"Submit"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4,className:"danger"},r.a.createElement("b",null,r.a.createElement("i",null,"Specify search criteria and Submit. System performs search in batch of ",this.props.pageSize," records. To perform search on specific batch, select Page No appearing below after first submit."))))))))}}]),t}(n.Component),M=function(e){return r.a.createElement("thead",null,r.a.createElement("tr",{className:"darkblue"},r.a.createElement("th",{colSpan:4},"Selected Search ")),e.data.map(function(e,t){return r.a.createElement("tr",{className:"warning",key:t},e.map(function(e,t){return r.a.createElement("th",{key:t}," ",e)}))}))},H=a(62),L=a.n(H);L.a.defaults.headers.common.Accept="application/json";var P="https://c7webtest.azurewebsites.net/searches/",Y={getSearchList:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get(P);case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),getResultList:function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,l,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.indexId,n=t.start,r=t.pageSize,e.prev=1,l=P+a+"/results?start=".concat(n,"&size=").concat(r),e.next=5,L.a.get(l);case 5:return i=e.sent,e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={searchData:[],resultsData:[],selectedValue:-1,filepath:"",pageNo:1,pageSize:1e3,recordCount:0,sortBy:"Path",isLoading:!1,searchCriteria:{}},a.db=null,a.onSortHandler=function(e){a.setState({resultsData:S.a.sortBy(a.state.resultsData,e),sortBy:e})},a.onChangeHandler=function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({selectedValue:t,resultsData:[],pageNo:1,isLoading:!1,start:1}),a.cleanSearchCriteria();case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onPageChangeHandler=function(){var e=Object(f.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.setState({isLoading:!0}),n=t.target.value,setTimeout(function(){return a.populateResults(n)},500);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onSubmitHandler=function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({isLoading:!0,searchCriteria:t,start:1}),setTimeout(function(){return a.populateResults()},500);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.mapResultsToView=function(e){return e.map(function(e,t){return e.Ext=a.getExtension(e.Path),e.MaxDate=a.getMaxDate(e.LastModified,e.Created),e})},a.populateResults=function(){var e=Object(f.a)(p.a.mark(function e(t){var n,r,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,1,t||(t=a.state.pageNo),n=(t-1)*a.state.pageSize+1,e.next=6,Y.getResultList({indexId:a.state.selectedValue,start:n,pageSize:a.state.pageSize});case 6:r=e.sent,l=r.data,a.setState({resultsData:S.a.sortBy(a.mapResultsToView(l),a.state.sortBy),pageNo:t,isLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),h.toast.error("An error occured while fetching data"+e.t0),a.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),a.onChangeHandler=a.onChangeHandler.bind(Object(g.a)(Object(g.a)(a))),a.onSubmitHandler=a.onSubmitHandler.bind(Object(g.a)(Object(g.a)(a))),a.onPageChangeHandler=a.onPageChangeHandler.bind(Object(g.a)(Object(g.a)(a))),a.onSortHandler=a.onSortHandler.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getSearchList();case 3:t=e.sent,a=t.data,this.setState({searchData:a}),this.cleanSearchCriteria(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"cleanSearchCriteria",value:function(){this.setState({searchCriteria:{minFileSize:0,maxFileSize:0,filePath:"",minDate:"",maxDate:""}})}},{key:"getExtension",value:function(e){return e.toLowerCase().substr(e.lastIndexOf("."))}},{key:"getMaxDate",value:function(e,t){var a,n;return e?t?(a=new Date(e))>(n=new Date(t))?a:n:new Date(e):new Date(t)}},{key:"objectToString",value:function(e){return JSON.stringify(e)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"applyFiltersOnBatch",value:function(){try{var e=this.state.searchCriteria,t=e.minFileSize,a=e.maxFileSize,n=e.filePath,r=e.minDate,l=e.maxDate;return t=t||0,a=a||0,n=n?n.toLowerCase():"",r=r?new Date(r):"",(l=l?new Date(l):"")&&l.setDate(l.getDate()+1),this.state.resultsData.filter(function(e){return e.Size>=t}).filter(function(e){return e.Size<=(0===a?e.Size:a)}).filter(function(e){return""===n||-1!==e.Path.toLowerCase().indexOf(n)}).filter(function(e){return r?e.MaxDate>=r:1}).filter(function(e){return l?e.MaxDate<l:1})}catch(i){throw i}}},{key:"render",value:function(){var e=this.state.searchData[parseInt(this.state.selectedValue)],t={pageNo:parseInt(this.state.pageNo),pageSize:this.state.pageSize,recordCount:0,loadedFiles:this.state.resultsData.length},a=this.applyFiltersOnBatch();return e&&(t.recordCount=e.Count),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("h1",null," [Company Name] File Search Application"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-3"},r.a.createElement(O,{data:this.state.searchData,onChangeHandler:this.onChangeHandler})),r.a.createElement("div",{className:"col-xs-9"},e&&r.a.createElement(k,{data:e,onSubmitHandler:this.onSubmitHandler,selectedValue:this.state.selectedValue,isLoading:this.state.isLoading,pageSize:t.pageSize,pageDetails:t}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-3"}),r.a.createElement("div",{className:"col-xs-9"},t.loadedFiles>0&&r.a.createElement(y,{pageDetails:t,onPageChange:this.onPageChangeHandler}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},e&&r.a.createElement(z,{data:a,onSortHandler:this.onSortHandler})))))}}]),t}(n.Component),V=(a(334),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(h.ToastContainer,{position:"top-center",autoClose:!1,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!1}),r.a.createElement(R,null))}}]),t}(n.Component));i.a.render(r.a.createElement(V,null),document.getElementById("root"))},87:function(e,t,a){}},[[156,2,1]]]);
//# sourceMappingURL=main.4dd2ad0b.chunk.js.map